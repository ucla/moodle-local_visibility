define(["jquery","core/notification","core/str"],function(a,b,c){var d=0,e=function(a,d){c.get_strings([{key:"confirm",component:"moodle"},{key:a,component:"local_visibility"},{key:"yes",component:"core"},{key:"no",component:"core"}]).done(function(a){b.confirm(a[0],a[1],a[2],a[3],d)}.bind(this)).fail(b.exception)},f=function(){var e=d.data("id"),f=d.data("course");a.ajax({url:"ajax.php",data:{action:"delete",courseid:f,rangeid:e}}).done(function(d){if(d.success)a(".range"+e).fadeOut(250),a(".notifications").remove(),b.alert(null,d.successmsg),0==d.count&&location.reload();else{var f=c.get_string("deleteerror","local_visibility");a.when(f).done(function(a){window.alert(a)})}})},g=function(){var e=d.data("course");a.ajax({url:"ajax.php",data:{action:"deleteall",courseid:e}}).done(function(d){if(d.success)a(".visibility-session").fadeOut(250),a(".notifications").remove(),b.alert(null,d.successmsg),location.reload();else{var e=c.get_string("deleteallerror","local_visibility");a.when(e).done(function(a){window.alert(a)})}})};return{init:function(){a(".rangedeletebutton").click(function(b){d=a(this),b.preventDefault(),e("confirmremovevisibilitysession",f)}),a("#id_rangedeleteallbutton").click(function(b){d=a(this),b.preventDefault(),e("confirmdeleteallsessions",g)})}}});